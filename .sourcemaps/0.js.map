{"version":3,"sources":["../../src/pages/subscribedjold/subscribedj.module.ts","../../src/pages/subscribedjold/subscribedj.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SubscribedjPage } from './subscribedj';\n\n@NgModule({\n  declarations: [\n    SubscribedjPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SubscribedjPage),\n  ],\n})\nexport class SubscribedjPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/subscribedjold/subscribedj.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController, Events} from 'ionic-angular';\nimport { Http, Headers, RequestOptions } from '@angular/http';\nimport { LoadingController } from 'ionic-angular';\nimport { Appsetting } from '../../providers/appsetting';\nimport { PayPal, PayPalPayment, PayPalConfiguration } from '@ionic-native/paypal';\nimport { EventsdjPage } from '../eventsdj/eventsdj';\nimport { TermsdjsubsPage } from '../termsdjsubs/termsdjsubs';\n// import { LogindjPage } from '../logindj/logindj';\nimport { InAppBrowser } from '@ionic-native/in-app-browser';\n\n/**\n * Generated class for the SubscribedjPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-subscribedj',\n  templateUrl: 'subscribedj.html',\n})\nexport class SubscribedjPage {\n  public subscriv;reguserid;\n  public data = {};\n  public Loading = this.loadingCtrl.create({\n    content: 'Please wait...',\n    dismissOnPageChange: true\n  });\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    public events: Events,\n    public appsetting: Appsetting,\n    public http: Http,\n    public loadingCtrl: LoadingController,\n    private payPal: PayPal,\n    private alertCtrl: AlertController,\n    public iab: InAppBrowser\n    ) {\n     this.events.publish('role', 'dj');\n     this.reguserid = navParams.get(\"usersignupid\");\n     this.data = {\n      checkbx:true,\n    }\n     this.subscribeplan();\n  }\n\n  subscribeplan(){\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/x-www-form-urlencoded;charset=utf-8');\n    let options = new RequestOptions({ headers: headers });\n    var userdata = JSON.parse(localStorage.getItem(\"USER_DATA\"));\n    var data = {\n        role : userdata.role,\n      }\n    var Serialized = this.serializeObj(data);\n    this.http.post(this.appsetting.myGlobalVar + 'subscriptions/getSubscription', Serialized, options).map(res => res.json()).subscribe(response => {\n        if(response.isSuccess==\"true\"){\n            this.subscriv=response.data;\n        }\n    });\n  }\n\n  ionViewDidEnter() {\n    if (window.navigator.onLine == true) {\n    } else {\n      this.Loading.dismiss();\n      let alert = this.alertCtrl.create({\n        title: 'Network connection',\n        subTitle: 'Something went wrong check your internet connection',\n        buttons:['ok']\n      });\n      alert.present();\n      setTimeout(() => alert.dismiss(), 2500);\n    }\n  }\n\n\n  setBackButtonAction(){\n    //Write here wherever you wanna do\n    this.navCtrl.push(EventsdjPage);\n  }\n\n  subscribe(chkbx,amt){\n    var userdat = JSON.parse(localStorage.getItem(\"USER_DATA\"));\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/x-www-form-urlencoded;charset=utf-8');\n    var options = new RequestOptions({ headers: headers });\n    var userid = JSON.parse(localStorage.getItem(\"USER_DATA\")).id;\n    this.Loading.present();\n      var data = {\n        user_id: userid,\n            }\n      var serialized = this.serializeObj(data);\n    if(chkbx==false){\n           let alertr = this.alertCtrl.create({\n             title: '',\n             subTitle: \"Please accept the terms & conditions\",\n             buttons:['ok']        \n           });\n             alertr.present();\n         setTimeout(()=>alertr.dismiss(),3500);\n      } else {\n        var paydata={\n          'amount':amt,\n          'userid':userdat.id\n        };\n      //console.log(amt);\n      var target = \"_blank\";    \n      var option = \"location=no,hidden=no\";\n      var browser = this.iab.create('http://vikrant.crystalbiltech.com/vikkitestrecurring/index.php?data='+encodeURIComponent(JSON.stringify(paydata)),target,option);\n      //browser.close();\n      browser.on('loadstart').subscribe((e) => {\n        var redirect_uri = e.url.split('success.php');\n        var redirect_cancel = e.url.split('cancel.php');\n        if (redirect_uri[0] == \"https://vikrant.crystalbiltech.com/vikkitestrecurring/\") {\n          browser.close();\n          let alert = this.alertCtrl.create({\n            title: 'Subscribed',\n            subTitle: \"Successfully subscribed\",\n            buttons:['ok']\n            });\n            alert.present();\n            setTimeout(()=>alert.dismiss(),3500);\n      this.navCtrl.push(EventsdjPage);\n      }\n        else if(redirect_cancel[0] == 'https://vikrant.crystalbiltech.com/vikkitestrecurring/'){\n          browser.close();\n              let alertr = this.alertCtrl.create({\n                        title: 'Subscribed',\n                        subTitle: 'Subscription not alloted',\n                        buttons:['ok']\n                        }); \n                        alertr.present();\n                    setTimeout(()=>alertr.dismiss(),3000);\n        }\n      }, err => {\n        //console.log(\"InAppBrowser loadstart Event Error: \" + err);\n       // alert(err)\n      });\n      }\n//     let headers = new Headers();\n//    headers.append('Content-Type', 'application/x-www-form-urlencoded;charset=utf-8');\n//    let options = new RequestOptions({ headers: headers });\n//    var userdata = JSON.parse(localStorage.getItem(\"USER_DATA\"));\n//    var data = {\n//        user_id : userdata.id,\n//        sub_id : this.subscriv.id\n//      }\n//    var Serialized = this.serializeObj(data);\n//    if(chkbx==false){\n//      let alertr = this.alertCtrl.create({\n//        title: '',\n//        subTitle: \"Please accept the terms & conditions\",\n//        buttons:['ok']\n//         \n//      });\n//        alertr.present();\n//    setTimeout(()=>alertr.dismiss(),3500);\n//    }else{\n//    this.payPal.init({\n//      PayPalEnvironmentProduction: 'YOUR_PRODUCTION_CLIENT_ID',\n//  PayPalEnvironmentSandbox: 'AUQH6SoDJmAlXBpqHMZYv-TJPr5CVCpCqfbMCkLqKsQZBUdL1DIyIDcTqqx5jC4Y6F9UEzcVhM_kAZWO'\n//}).then(() => {\n//  // Environments: PayPalEnvironmentNoNetwork, PayPalEnvironmentSandbox, PayPalEnvironmentProduction\n//  this.payPal.prepareToRender('PayPalEnvironmentSandbox', new PayPalConfiguration({\n//    // Only needed if you get an \"Internal Service Error\" after PayPal login!\n//    //payPalShippingAddressOption: 2 // PayPalShippingAddressOptionPayPal\n//  })).then(() => {\n//    let payment = new PayPalPayment(this.subscriv.monthly_rate, 'USD', 'Dj subscription', 'sale');\n//    this.payPal.renderSinglePaymentUI(payment).then(() => {\n//      this.http.post(this.appsetting.myGlobalVar + 'subscriptions/savesubscription', Serialized, options).map(res => res.json()).subscribe(response => {\n//        if(response.isSucess==\"true\"){\n//           \n//          // alert(JSON.stringify(response.data));\n//          localStorage.removeItem('USER_DATA');\n//          localStorage.setItem(\"USER_DATA\", JSON.stringify(response.data.User));\n//          console.log('role',response.data.User.role);\n//          // alert(response.data.User.role);\n//          \n//            let alertr = this.alertCtrl.create({\n//                title: 'Subscribed',\n//                subTitle: response.msg,\n//                buttons:['ok']\n//                }); \n//                alertr.present();\n//            //setTimeout(()=>alertr.dismiss(),4000);\n//            if(response.data.User.role == 'dj'){\n//              this.events.publish('role', 'dj');\n//            }else{\n//              this.events.publish('role', 'clubgoer');\n//            }\n//            this.navCtrl.push(EventsdjPage);\n//        }else{\n//            let alert = this.alertCtrl.create({\n//                title: 'Subscribed',\n//                subTitle: response.msg,\n//                buttons:['ok']\n//              });\n//                alert.present();\n//            //setTimeout(()=>alert.dismiss(),4000);\n//        }\n//    });\n//    }, () => {\n//      // Error or render dialog closed without being successful\n//    });\n//  }, () => {\n//    // Error in configuration\n//  });\n//}, () => {\n//  // Error in initialization, maybe PayPal isn't supported or something else\n//});\n//  }\n  }\n\n  terms(){\n    this.navCtrl.push(TermsdjsubsPage);\n  }\n  \n  serializeObj(obj) {\n    var result = [];\n      for (var property in obj)\n        result.push(encodeURIComponent(property) + \"=\" + encodeURIComponent(obj[property]));\n        return result.join(\"&\");\n  }\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad SubscribedjPage');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/subscribedjold/subscribedj.ts"],"sourceRoot":""}